

<!DOCTYPE html>
<html lang="zh-Hans" color-mode=light>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>优化爬虫初级篇 - So1n blog</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="google" content="notranslate" />
  
  <meta name="description" content="前记：之所以说是初级篇，是我现在用的爬虫最多也就是十万...">
  <meta name="author" content="So1n">
  <link rel="icon" href="/images/icons/favicon-16x16.png" type="image/png" sizes="16x16">
  <link rel="icon" href="/images/icons/favicon-32x32.png" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png" sizes="180x180">
  <meta rel="mask-icon" href="/images/icons/stun-logo.svg" color="#333333">
  
    <meta rel="msapplication-TileImage" content="/images/icons/favicon-144x144.png">
    <meta rel="msapplication-TileColor" content="#000000">
  

  
<link rel="stylesheet" href="/css/style.css">


  
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1445822_s6x2xcokxrl.css">

  

  
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">

  

  
    
      
        
        
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/atom-one-dark.min.css" name="highlight-style" mode="light">

      
        
        
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/atom-one-dark.min.css" name="highlight-style" mode="dark">

      
  

  <script>
    var CONFIG = window.CONFIG || {};
    var ZHAOO = window.ZHAOO || {};
    CONFIG = {
      isHome: false,
      fancybox: true,
      pjax: false,
      lazyload: {
        enable: true,
        only_post: 'false',
        loading: '/images/theme/loading.gif'
      },
      donate: {
        enable: true,
        alipay: 'https://pic.izhaoo.com/alipay.jpg',
        wechat: 'https://pic.izhaoo.com/wechat.jpg'
      },
      galleries: {
        enable: true
      },
      fab: {
        enable: true,
        always_show: true
      },
      carrier: {
        enable: false
      },
      daovoice: {
        enable: false
      },
      preview: {
        background: {
          default: '/images/theme/welcome-image.jpg',
          api: 'https://source.unsplash.com/random/1920x1080'
        },
        motto: {
          default: '我们总说社会是个大染缸 其实是我们自己掉色',
          api: '',
          data_contents: '["data","content"]'
        },
      },
      qrcode: {
        enable: true,
        type: 'url',
        image: 'https://pic.izhaoo.com/weapp-code.jpg',
      },
      toc: {
        enable: true
      },
      scrollbar: {
        type: 'simple'
      },
      notification: {
        enable: false,
        delay: 4500,
        list: '',
        page_white_list: '',
        page_black_list: ''
      }
    }
  </script>

  

  

<meta name="generator" content="Hexo 5.3.0"></head>

<body class="lock-screen">
  <div class="loading"></div>
  


  <nav class="navbar">
    <div class="left">
      
        <i class="iconfont iconqrcode j-navbar-qrcode"></i>
      
      
        <i class="iconfont iconmoono" id="color-toggle" color-toggle="light"></i>
      
    </div>
    <div class="center">优化爬虫初级篇</div>
    <div class="right">
      <i class="iconfont iconmenu j-navbar-menu"></i>
    </div>
    
      <div id="qrcode-navbar"></div>
    
  </nav>

  

<nav class="menu">
  <div class="menu-wrap">
    <div class="menu-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <ul class="menu-content"><li class="menu-item">
        <a href="/ " class="underline "> 首页</a>
      </li><li class="menu-item">
        <a href="/galleries/ " class="underline "> 摄影</a>
      </li><li class="menu-item">
        <a href="/archives/ " class="underline "> 归档</a>
      </li><li class="menu-item">
        <a href="/tags/ " class="underline "> 标签</a>
      </li><li class="menu-item">
        <a href="/categories/ " class="underline "> 分类</a>
      </li><li class="menu-item">
        <a href="/about/ " class="underline "> 关于</a>
      </li></ul>
    
      <div class="menu-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
    
  </div>
</nav>
  <main id="main">
  <div class="article-wrap">
    <div class="row container">
      <div class="col-xl-3"></div>
      <div class="col-xl-6"><article class="article">
  <div class="wrap">
    <section class="head">
  <img   class="lazyload" data-original="/images/theme/post-image.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  draggable="false">
  <div class="head-mask">
    <h1 class="head-title">优化爬虫初级篇</h1>
    <div class="head-info">
      <span class="post-info-item"><i class="iconfont iconcalendar"></i>August 08, 2017</span>
      
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
      <span class="post-info-item"><i class="iconfont iconfont-size"></i>5534</span>
    </div>
  </div>
</section>

    <section class="main">
      <section class="content">
        <h3 id="1-增加爬行速度"><a href="#1-增加爬行速度" class="headerlink" title="1.增加爬行速度"></a>1.增加爬行速度</h3><p>爬虫是需要访问网络的，所以速度会比写入数据还慢，数据量少的话爬虫速度还看不出有多慢，当数据量多起来的时候，少则要几天，多则要几周的时间。</p>
<h4 id="1-1-分布式爬虫"><a href="#1-1-分布式爬虫" class="headerlink" title="1.1 分布式爬虫"></a>1.1 分布式爬虫</h4><p>分布式爬虫，简单来说就是本来由一台电脑运行的爬虫任务分给其他电脑一起运作，从而达到提升爬虫速度。<br>分布式爬虫主要有主从模式和对等模式，两种模式都有对应的缺点。例如主从模式的爬虫速度会因为控制节点的瓶颈限制到速度（因为控制节点上面有URL管理器、数据存储器和控制调度器，而其他爬虫节点只是从调度器那里领取任务再执行任务（<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1hrWEOYg#list/path=/%E3%80%8APython%E7%88%AC%E8%99%AB%E5%BC%80%E5%8F%91%E4%B8%8E%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%8B%E8%AF%95%E8%AF%BB%E7%AB%A0%E8%8A%82">这里有一个简单的分布式爬虫主从模式的栗子</a>，书里第7章的内容）），而对等模式会因为当有一台服务器死机或者添加新的服务器，那么所有URL的哈希求余的结果就都要变化。也就是说，这种方式的扩展性不佳，不过对等模式也有进行改进。这两种方案的对比和结果图示可以参考<a target="_blank" rel="noopener" href="http://f.dataguru.cn/thread-529666-1-1.html">这里</a><br>虽然我现在没有那么多电脑/服务器来跑分布式爬虫，但是可以通过一些资料了解到分布式爬虫的存在和大概结构，运行原理。目前网上的资料大多都是采用主从模式的。所以对等式我也只是了解一下，并没有找到案例（网上基本都是Scrapy+Redis的主从分布式爬虫，我试着跑一下，发现数据量还不会造成瓶颈- -估计要上千万的数据量才会有瓶颈吧）</p>
<h4 id="1-2-榨干性能去爬虫"><a href="#1-2-榨干性能去爬虫" class="headerlink" title="1.2 榨干性能去爬虫"></a>1.2 榨干性能去爬虫</h4><p>首先先了解几个概念</p>
<ul>
<li>进程<br>进程是具有一定独立功能的程序关于某个数据集合上的一次运行活动,进程是系统进行资源分配和调度的一个独立单位。每个进程都有自己的独立内存空间，不同进程通过进程间通信来通信。由于进程比较重量，占据独立的内存，所以上下文进程间的切换开销（栈、寄存器、虚拟内存、文件句柄等）比较大，但相对比较稳定安全。</li>
<li>线程<br>线程是进程的一个实体,是CPU调度和分派的基本单位,它是比进程更小的能独立运行的基本单位.线程自己基本上不拥有系统资源,只拥有一点在运行中必不可少的资源(如程序计数器,一组寄存器和栈),但是它可与同属一个进程的其他的线程共享进程所拥有的全部资源。线程间通信主要通过共享内存，上下文切换很快，资源开销较少，但相比进程不够稳定容易丢失数据。<br>不过要注意的是，python的线程并不是并行，而是并发。这也是之前很多人在使用Python时摒弃线程的原因</li>
<li>协程<br>协程是一种用户态的轻量级线程，协程的调度完全由用户控制。协程拥有自己的寄存器上下文和栈。协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈，直接操作栈则基本没有内核切换的开销，可以不加锁的访问全局变量，所以上下文的切换非常快。<br>简单来说，协程相比线程来说有一个优势，就是在协程间切换时不需要很大的资源开销。在使用时可以开多个进程，然后每个进程开多个线程，每个线程开多个协程来综合使用。</li>
<li>并发与并行</li>
</ul>
<p><strong>并发</strong>：当有多个线程在操作时,如果系统只有一个CPU,则它根本不可能真正同时进行一个以上的线程，它只能把CPU运行时间划分成若干个时间段,再将时间 段分配给各个线程执行，在一个时间段的线程代码运行时，其它线程处于挂起状。.这种方式我们称之为并发(Concurrent)。<br><strong>并行</strong>：当系统有一个以上CPU时,则线程的操作有可能非并发。当一个CPU执行一个线程时，另一个CPU可以执行另一个线程，两个线程互不抢占CPU资源，可以同时进行，这种方式我们称之为并行(Parallel)。<br><strong>区别</strong>：并发和并行是即相似又有区别的两个概念，并行是指两个或者多个事件在同一时刻发生；而并发是指两个或多个事件在同一时间间隔内发生。在多道程序环境下，并发性是指在一段时间内宏观上有多个程序在同时运行，但在单处理机系统中，每一时刻却仅能有一道程序执行，故微观上这些程序只能是分时地交替执行。倘若在计算机系统中有多个处理机，则这些可以并发执行的程序便可被分配到多个处理机上，实现并行执行，即利用每个处理机来处理一个可并发执行的程序，这样，多个程序便可以同时执行。</p>
<ul>
<li>同步与异步，阻塞与非阻塞<br>这个的概念很多人都清楚了，这里贴个直白的解释，看了容易理解<br>老张爱喝茶，废话不说，煮开水。出场人物：老张，水壶两把（普通水壶，简称水壶；会响的水壶，简称响水壶）。1 老张把水壶放到火上，立等水开。（同步阻塞）老张觉得自己有点傻2 老张把水壶放到火上，去客厅看电视，时不时去厨房看看水开没有。（同步非阻塞）老张还是觉得自己有点傻，于是变高端了，买了把会响笛的那种水壶。水开之后，能大声发出嘀~~~~ 的噪音。3 老张把响水壶放到火上，立等水开。（异步阻塞）老张觉得这样傻等意义不大4 老张把响水壶放到火上，去客厅看电视，水壶响之前不再去看它了，响了再去拿壶。（异步非阻塞）老张觉得自己聪明了。所谓同步异步，只是对于水壶而言。普通水壶，同步；响水壶，异步。虽然都能干活，但响水壶可以在自己完工之后，提示老张水开了。这是普通水壶所不能及的。同步只能让调用者去轮询自己（情况2中），造成老张效率的低下。所谓阻塞非阻塞，仅仅对于老张而言。立等的老张，阻塞；看电视的老张，非阻塞。情况1和情况3中老张就是阻塞的，媳妇喊他都不知道。虽然3中响水壶是异步的，可对于立等的老张没有太大的意义。所以一般异步是配合非阻塞使用的，这样才能发挥异步的效用。<br>作者：愚抄<br>链接：<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/19732473/answer/23434554">https://www.zhihu.com/question/19732473/answer/23434554</a><br>来源：知乎</li>
<li>IO密集型任务 VS 计算密集型任务<br>所谓IO密集型任务，是指磁盘IO、网络IO占主要的任务，计算量很小。比如请求网页、读写文件等。当然我们在Python中可以利用sleep达到IO密集型任务的目的。<br>所谓计算密集型任务，是指CPU计算占主要的任务，CPU一直处于满负荷状态。比如在一个很大的列表中查找元素（当然这不合理），复杂的加减乘除等。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/24118476">说了关于异步和爬虫的文章</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/24283040">说了多线程与多进程的</a><br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/ydf0509/p/7223160.html">说了协程与线程的</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/lambert310/article/details/51162634">说了为什么要使用进程+协程的方案</a>，很多人都在使用这种方案<br>附加：<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/littlethunder/article/details/40983031"> python3下multiprocessing、threading和gevent性能对比</a><br><a target="_blank" rel="noopener" href="https://thief.one/2016/11/23/Python-multiprocessing/">Multiprocessing基础</a><br>如果数据量大了，就要把爬虫大概分为URL访问，网页解析，数据库读写等几大类。<br>像URL访问，数据库读写可以用线程或者协程。网页解析用进程，同时，URL访问应该使用异步IO，网页访问等待的时间大大大于CPU操作的时间<br>协程是用户自己来编写调度逻辑的，对CPU来说，协程其实是单线程，所以CPU不用去考虑怎么调度、切换上下文，这就省去了CPU的切换开销，所以协程在一定程度上又好于多线程<br>有些时候线程最多只能开几百个，理论上协程可以开无数个（不过会遇cant watch more than 1024 sockets），如果网速不够的话，其实两个的速度差不多<br>有时还需要考虑下网络IO电脑配置情况（如CPU核数，内存大小等）</p>
<h3 id="2-解决反爬"><a href="#2-解决反爬" class="headerlink" title="2.解决反爬"></a>2.解决反爬</h3><p>爬虫速度上去了，基本都会跟反爬见面了。爬虫与反爬的斗争从有爬虫就开始了，虽然最后都是爬虫的胜利，但也付出了很多代价<br>要解决反爬虫，需要先了解有哪些反爬措施，反爬措施有以下几种：</p>
<ul>
<li><p><strong>基于验证码的反爬虫</strong>，这种反爬是我们从拥有一个网络账号开始就能看得见的反爬技术，而且已经从一开始的传统验证码、逻辑验证码，到现在12306的图片验证码，还有许多网站开始用的滑动验证码，和最近刚出现的那种用鼠标点击一个圆点就能通过的验证码（这种验证码我是暑假也就是7月后才看到的实在不知道他的原理是什么，也是滑动图片验证码的公司出的，好像是利用判断鼠标位置和移动的行为是不是用户来验证的- -）</p>
</li>
<li><p><strong>基于Headers的反爬</strong>，这是一种从请求头Headers进行反爬是比较常见的，大部分网站都有对请求头的User-Agent和Referer字段进行检测，同时也是最容易解决的一种反爬，直接从自己浏览器获取请求头，或搜索一些请求头来使用就可以了（下文不再描述）</p>
</li>
<li><p><strong>基于用户行为的反爬</strong>，通俗来见就是不像人为访问他的网站，例如同一ip短时间内大量的访问页面。</p>
</li>
<li><p><strong>基于动态页面的反爬</strong>，现在越来越多的网站采用动态加载技术，无法直接从页面上获取数据，需要分析Ajax请求，再进行发送接受。</p>
</li>
<li><p><strong>基于页面请求分析</strong>，有些网页在填写表单时会有一些隐藏的表单，他们在你登录时就会为一个值自动赋值，当提交表单时就把这个值提交，如果你的代码没填写这个值时，对面服务器就会拒绝你的访问，不过这个值 一般都很容易找到（例子为知乎的登录）。还有一种是加密数据，直接把用户提交的数据进行加密再传送（例如密码），这时就要通过多次登录来获取到哪些数据是是登录时才生成的，再分析是用哪个方法生成的，有时还有二次登录分开加密数据（例子为百度登录），这种反爬每个网站的规律都不一样，所以要逐一分析，这也是考验一个爬虫开发者的能力。（下文也不再对这种反爬方式再次描述）</p>
<p>了解了一些反爬措施后，我们可以来研究如何解决反爬了。</p>
<h4 id="2-1-解决验证码问题"><a href="#2-1-解决验证码问题" class="headerlink" title="2.1  解决验证码问题"></a>2.1  解决验证码问题</h4></li>
<li><p>COOKIE登录<br>我们可以把登录时获取的cookie获取到，并提取里面的信息，下次使用时再调用出来。具体调用方法得看使用使用的是什么库，不过原理都是提取cookies还有获取这个cookies时所使用的headera一起传给请求那里。</p>
</li>
<li><p>验证码识别<br>验证码识别中的传统验证码识别只要是肯下功夫，通常情况下识别率能达到90%以上了。<br>python的传统验证码识别需要安装tesseract-ocr,pytesseract和pillow<br>pillow主要是用来,把图像进行转换，比如将一个验证码图片进行二值化处理，字符翻转等最后生成一张容易被ocr引擎识别的图片。<br>pytesseract主要用来识别图片里面的内容，如果要识别更多内容，需要用tesseract-ocr来训练，生成数据。<br>还有一些比较奇葩的验证码，可以使用人工打码，不过需要一定的费用，具体打码平台自行百度吧～<br>还有一种这几年非常流行的滑动验证码，这种方法可以使用多账号登录后获取cookie信息再组建cookie池的方法绕行。关于如何破解这种验证码可以<a target="_blank" rel="noopener" href="http://www.w2bc.com/article/170660">访问这里</a></p>
</li>
<li><p>移动端网页<br>这部分我不知道要放在哪里比较好- -，我在爬虫时，一般发现电脑端比较难爬取且移动端有我需要获取的数据时我都直接转到移动端了。。。<br>通过修改UA可以达到变成安卓手机，苹果手机或者平板电脑去访问，从而页面变成为移动端的页面，通常开头的WWW都变为M，加入这个页面比较难的话，还可以通过wap开头去访问<br>通常来说，移动端的页面验证码没那么复杂，也没用Ajax技术生成的动态网页</p>
</li>
</ul>
<h4 id="2-2-ip问题"><a href="#2-2-ip问题" class="headerlink" title="2.2 ip问题"></a>2.2 ip问题</h4><p>通常网站都会自行判断同一个IP的访问在一定时间内的访问速度，如果过高时，服务器就会拒绝给这个IP发送信息<br>解决方法有以下几种：<br>-Tor 代理<br>这个可以让你匿名浏览，可以对访问的网站隐藏IP地址，但是他的访问速度比较慢，一般很少人考虑用到</p>
<ul>
<li>VPN<br>这里说的VPN主要是利用VPN提供商可以分配不同的网络线路且自动更换IP，实时性很高，速度也很快，稳定性可靠。不过价格都不低。。。。。</li>
<li>ADSL拨号<br>也就是网上拨号，因为ADSL每次断开重连的时候接受的IP都会有变化，可以利用这个原理来改变IP，不过每次重连的时候时间比较久，所以实时性并不高（手机的打开飞行模式再关闭也是可以这样的）</li>
<li>IP代理池<br>IP代理池如果是商用的也是需要钱的，但是国内有些免费的IP，我们可以通过抓取IP并判断IP是否可以用了来组建IP代理池让自己的爬虫可以调用，当然，已经有一些开源的IP代理池项目了<br>首先是如何自己打造一个IP代理池<br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/demon89/p/proxy_ip.html?utm_source=itdadao&utm_medium=referral">第一篇文章</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/head_cow/article/details/52561637">第二篇文章</a><br>一些开源的代理池<br><a target="_blank" rel="noopener" href="https://github.com/qiyeboy/IPProxyPool">IPProxyPool</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/24165119">这个有说了设计思路且开源了自己制作的代理池</a></li>
</ul>
<h4 id="2-3动态页面加载问题"><a href="#2-3动态页面加载问题" class="headerlink" title="2.3动态页面加载问题"></a>2.3动态页面加载问题</h4><p>遇到一些需要动态加载的页面可以使用selenium+PhantomJS来解决，不过PhantomJS已经停止维护了，而我经常使用selenium+chrome，听说最近有个<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/26810049">Headless Chrome</a>，<a target="_blank" rel="noopener" href="https://github.com/yesvods/Blog/issues/10">这个网页也有介绍</a>官方文档请点击<a target="_blank" rel="noopener" href="https://sites.google.com/a/chromium.org/chromedriver/home">这</a>里（这个网页并没有问题，自行解决）不过我还没了解。。<br>selenium可以对元素进行选取，可以对页面进行操作等等，几乎我们在页面进行的操作他都可以进行操作，如果要深入了解的建议访问<a target="_blank" rel="noopener" href="http://selenium-python.readthedocs.io/index.html">官方文档（英文的）</a>或者可以看看这篇文章<a target="_blank" rel="noopener" href="http://www.jianshu.com/p/520749be7377">了解一下</a><br>一般selenium+PhantomJS容易被反爬识别到，不建议使用了。。这种爬取方法可以说比较万能，但是速度有点慢</p>
<h4 id="3数据库选择（非次要）"><a href="#3数据库选择（非次要）" class="headerlink" title="3数据库选择（非次要）"></a>3数据库选择（非次要）</h4><p>一开始会总犹豫我爬取的数据放哪里好。现在觉得都无所谓了。<br>因为前面已经说过了，我现在爬取的数量只是十万级别，用哪个数据库都差不多。随心，不过这里放一下看的一些文章。反正我喜欢用mongoDB，不过要注意NOSQL虽说是非关系数据库，不过不是说没关系。NOSQL是 NOT ONLY SQL的意思，这一点要注意下<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/lijinqi1987/article/details/51823506">介绍了关系型和非关系型数据库的特点</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/longxingzhiwen/article/details/53896702">同样是说两大类数据库的区别，不过更详细，推荐看这个</a><br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/binyue/archive/2013/10/21/3380750.html">顺便放一个说到倒排索引的文章</a>大型数据读写时可以用到倒排索引。起这名字的人好奇葩，如果翻译为互换位置索引我还是容易理解，翻译为倒排，我以为是从后面数过来- -<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/chenfengdejuanlian/article/details/54574995">这篇文章讲了下关系型数据库的限制以及发展（简述）</a><br>最后推荐下MongoDB的中文社区<a target="_blank" rel="noopener" href="http://mongoing.com/">点击这里跳转</a></p>
      </section>
      <section class="extra">
        
          <ul class="copyright">
  
    <li><strong>本文作者：</strong>So1n</li>
    <li><strong>本文链接：</strong><a href="http://so1n.me/2017/08/08/7_how_to%20optimize_the_spider/index.html" title="http:&#x2F;&#x2F;so1n.me&#x2F;2017&#x2F;08&#x2F;08&#x2F;7_how_to%20optimize_the_spider&#x2F;index.html">http:&#x2F;&#x2F;so1n.me&#x2F;2017&#x2F;08&#x2F;08&#x2F;7_how_to%20optimize_the_spider&#x2F;index.html</a></li>
    <li><strong>版权声明：</strong>本博客所有文章均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" title="BY-NC-SA" target="_blank" rel="noopener">BY-NC-SA</a> 许可协议，转载请注明出处！</li>
  
</ul>
        
        
          <section class="donate">
  <div id="qrcode-donate">
    <img   class="lazyload" data-original="https://pic.izhaoo.com/alipay.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" >
  </div>
  <div class="icon">
    <a href="javascript:;" id="alipay"><i class="iconfont iconalipay"></i></a>
    <a href="javascript:;" id="wechat"><i class="iconfont iconwechat-fill"></i></a>
  </div>
</section>
        
        
  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%88%AC%E8%99%AB/" rel="tag">爬虫</a></li></ul> 

        
  <nav class="nav">
    <a href="/2017/08/10/8_12306_spider/"><i class="iconfont iconleft"></i>制作一个火车票查询余票的爬虫</a>
    <a href="/2017/08/01/6/">Python数据结构以及排序<i class="iconfont iconright"></i></a>
  </nav>

      </section>
      
        <section class="comments">
  
    <div class="btn" id="comments-btn">查看评论</div>
  
  
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<div id="gitalk" class="gitalk"></div>
<script defer src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script>
  window.onload = function () {
    var gitalk = new Gitalk({
      clientID: '59f804e526b05c378470',
      clientSecret: '36679ff697cec424936a0f7c4bcd6d2988dac28e',
      id: window.location.pathname,
      repo: 'so1n.github.io',
      owner: 'so1n',
      admin: 'so1n'
    });
    if ( true ) {
      $("#comments-btn").on("click", function () {
        $(this).hide();
        gitalk.render('gitalk');
      });
    } else {
      gitalk.render('gitalk');
    }
  }
</script>

</section>
      
    </section>
  </div>
</article></div>
      <div class="col-xl-3">
        
          
  <aside class="toc-wrap">
    <h3 class="toc-title">文章目录：</h3>
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E8%AE%B0%EF%BC%9A%E4%B9%8B%E6%89%80%E4%BB%A5%E8%AF%B4%E6%98%AF%E5%88%9D%E7%BA%A7%E7%AF%87%EF%BC%8C%E6%98%AF%E6%88%91%E7%8E%B0%E5%9C%A8%E7%94%A8%E7%9A%84%E7%88%AC%E8%99%AB%E6%9C%80%E5%A4%9A%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%8D%81%E4%B8%87%E7%BA%A7%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%95%B0%E6%8D%AE%E9%87%8F%E8%BF%98%E6%98%AF%E4%B8%8D%E5%A4%A7%EF%BC%8C%E6%89%80%E4%BB%A5%E4%BB%A5%E4%B8%8B%E5%86%85%E5%AE%B9%E8%BF%98%E6%98%AF%E6%88%91%E5%AE%9E%E9%99%85%E9%81%87%E5%88%B0%E9%9C%80%E8%A6%81%E4%BC%98%E5%8C%96%E7%9A%84%E5%86%85%E5%AE%B9%E6%88%96%E8%80%85%E7%BD%91%E4%B8%8A%E7%9C%8B%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E6%96%87%E7%AB%A0%EF%BC%8C%E8%AF%A5%E6%96%87%E7%AB%A0%E5%BE%88%E5%A4%9A%E5%86%85%E5%AE%B9%E6%9D%A5%E8%87%AA%E4%BA%8E%E7%BD%91%E4%B8%8A%EF%BC%8C%E4%B8%BB%E8%A6%81%E6%98%AF%E5%81%9A%E8%AE%B0%E5%BD%95%E5%92%8C%E5%86%99%E4%B8%8B%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3%E3%80%82%E5%9B%A0%E4%B8%BA%E4%B8%BB%E8%A6%81%E6%98%AF%E8%AE%B0%E5%BD%95%EF%BC%8C%E6%89%80%E4%BB%A5%E5%A4%A7%E5%A4%9A%E6%98%AF%E5%8F%AA%E6%98%AF%E9%98%90%E8%BF%B0%E4%B8%8B%E6%9C%89%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%EF%BC%8C%E5%85%B7%E4%BD%93%E8%BF%98%E9%9C%80%E8%A6%81%E7%99%BE%E5%BA%A6%E7%AD%89%E5%8E%BB%E4%BA%86%E8%A7%A3"><span class="toc-text">前记：之所以说是初级篇，是我现在用的爬虫最多也就是十万级数据，数据量还是不大，所以以下内容还是我实际遇到需要优化的内容或者网上看到的一些文章，该文章很多内容来自于网上，主要是做记录和写下个人理解。因为主要是记录，所以大多是只是阐述下有这个方法，具体还需要百度等去了解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%A2%9E%E5%8A%A0%E7%88%AC%E8%A1%8C%E9%80%9F%E5%BA%A6"><span class="toc-text">1.增加爬行速度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%A7%A3%E5%86%B3%E5%8F%8D%E7%88%AC"><span class="toc-text">2.解决反爬</span></a></li></ol>
  </aside>

        
      </div>
    </div>
  </div>
</main>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>


<footer class="footer">
  <div class="footer-social"><a 
        href="https://github.com/so1n "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#9f7be1'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  icongithub-fill "></i>
      </a></div>
  
    <div class="footer-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
  
  <div class="footer-copyright">
    总访问量<span id="busuanzi_value_site_pv"></span>次
    访客数<span id="busuanzi_value_site_uv"></span>人次
  </div>

</footer>

  
      <div class="fab fab-plus">
    <i class="iconfont iconplus"></i>
  </div>
  
  
  <div class="fab fab-up">
    <i class="iconfont iconcaret-up"></i>
  </div>
  
  
    <div class="scrollbar j-scrollbar">
  <div class="scrollbar-current j-scrollbar-current"></div>
</div>
  
  
    
<script src="/js/color-mode.js"></script>

  
</body>

<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>



  
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>




  
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>






  
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>




<script src="/js/utils.js"></script>
<script src="/js/script.js"></script>







  <script>
    (function () {
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      } else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>













</html>